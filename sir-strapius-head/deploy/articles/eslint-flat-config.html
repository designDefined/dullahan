<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/b471035bc347e80a-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/d146d21450fe224a.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-5f38457b2eb92403.js"/><script src="/_next/static/chunks/4bd1b696-e1b3c7bcbfce1e14.js" async=""></script><script src="/_next/static/chunks/684-c26b34742a38b275.js" async=""></script><script src="/_next/static/chunks/main-app-b53c717fa137e114.js" async=""></script><script src="/_next/static/chunks/37-7ce4eea4950882d9.js" async=""></script><script src="/_next/static/chunks/app/articles/%5Bslug%5D/page-b718477628d18af2.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_23d20e font-sans antialiased"><div hidden=""><!--$--><!--/$--></div><article><header class="bg-background/95 supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50 w-full border-b backdrop-blur"><div class="container mx-auto flex h-16 items-center justify-between px-4"><a class="group relative flex items-center space-x-2" href="/"><div class="relative"><span class="text-foreground group-hover:text-primary text-xl font-extralight tracking-tight transition-colors">The Funnel</span><div class="absolute -bottom-1 left-0 h-[1px] transition-all duration-300 from-primary to-primary/60 w-0 bg-gradient-to-r group-hover:w-full"></div></div></a><nav class="hidden items-center space-x-8 sm:flex"><a class="group relative" href="/articles"><button data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-primary/90 h-9 px-4 py-2 has-[&gt;svg]:px-3 relative cursor-pointer overflow-hidden transition-all duration-500 ease-out bg-primary text-primary-foreground animate-navigation-link-active shadow-lg"><span class="relative z-10">Articles</span><div class="from-primary/20 to-primary/40 absolute inset-0 animate-pulse bg-gradient-to-r" style="animation-delay:0.2s;animation-duration:2s"></div><div class="absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-white/10 to-transparent transition-transform duration-700 group-hover:translate-x-full"></div></button></a><a class="group relative" href="/categories"><button data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:text-accent-foreground dark:hover:bg-accent/50 h-9 px-4 py-2 has-[&gt;svg]:px-3 relative cursor-pointer overflow-hidden transition-all duration-500 ease-out hover:bg-accent/50"><span class="relative z-10">Categories</span><div class="absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-white/10 to-transparent transition-transform duration-700 group-hover:translate-x-full"></div></button></a><a class="group relative" href="/about"><button data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:text-accent-foreground dark:hover:bg-accent/50 h-9 px-4 py-2 has-[&gt;svg]:px-3 relative cursor-pointer overflow-hidden transition-all duration-500 ease-out hover:bg-accent/50"><span class="relative z-10">About</span><div class="absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-white/10 to-transparent transition-transform duration-700 group-hover:translate-x-full"></div></button></a></nav><button data-slot="sheet-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-9 sm:hidden" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«R3brnb»" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5" aria-hidden="true"><path d="M4 12h16"></path><path d="M4 18h16"></path><path d="M4 6h16"></path></svg><span class="sr-only">Toggle menu</span></button></div></header><div class="animate-reveal container mx-auto px-4 py-12 sm:py-24"><nav aria-label="breadcrumb" data-slot="breadcrumb" class="mb-6"><ol data-slot="breadcrumb-list" class="text-muted-foreground flex flex-wrap items-center gap-1.5 break-words text-sm sm:gap-2.5"><li data-slot="breadcrumb-item" class="inline-flex items-center gap-1.5"><a class="hover:text-foreground transition-colors text-gray-600 hover:text-gray-900" data-slot="breadcrumb-link" href="/categories/environment">개발 환경</a></li><li data-slot="breadcrumb-separator" role="presentation" aria-hidden="true" class="[&amp;&gt;svg]:size-3.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></li><li data-slot="breadcrumb-item" class="inline-flex items-center gap-1.5"><span class="font-medium text-gray-900">eslint의 flat config가 추구하는 단순함</span></li></ol></nav><div class="mb-8"><h1 class="mb-6 break-words break-keep text-3xl font-bold">eslint의 flat config가 추구하는 단순함</h1><div class="mb-8 text-right text-sm text-gray-500">2025년 6월 21일</div></div><div class="mt-8"><div class="markdown"><p>얼마 전에 회사 리포지토리의 eslint의 버전을 업그레이드하면서 flat config를 도입했다. eslint v9부터는 이제 flat config가 기본값이 되었다고 하는데, 왜일까?</p>
<h3><strong>무엇이 달라졌을까?</strong></h3>
<p>flat config의 요점은 하나의 파일에 모든 규칙을 적는 것이다. 크고 복잡한 코드베이스를 운영하다보면 각각의 코드 파일들에 다른 lint 규칙을 적용하고 싶을 때가 많다. 이 요구에 부응하기 위해, 기존의 eslint는 대상 파일의 상위 디렉토리로 거슬러 올라가며 모든(root 설정을 만날 때 까지) 설정 파일을 탐색하고 규칙을 적용한다. 따라서 개발자는 프로젝트 최상단에 기본 규칙을 명시한 후, 각 디렉토리 별로 세분화된 설정을 추가하는 것으로 규칙을 커스터마이징할 수 있다.마치 객체 상속 같다.</p>
<p>flat config는 대신 하나의 파일에서, 규칙 객체의 배열을 선언하는 것으로 문제를 해결한다. 각각의 객체는 적용/무시 규칙, lint 규칙, 파싱 옵션, 사용할 플러그인들을 독립적으로 지니고 있으며, 위에서부터 순차적으로 대상 파일들에 적용된다. 서로 다른 규칙들은 모두 적용되고, 겹치는 부분은 <strong>덮어쓰기</strong>된다. flat cascade라는 방식이라고 한다.</p>
<blockquote>
<p><strong>Goodbye extends, hello flat cascade</strong>
-- <a href="https://eslint.org/blog/2022/08/new-config-system-part-2/" rel="noopener noreferrer" target="_blank">ESLint 공식 블로그 포스팅</a></p>
</blockquote>
<pre><code class="language-javascript">// 어머 깔끔해
export default [
  {
    // 적용 범위
    files: ["**/*.{ts,tsx}"], 
    
    // 규칙들
    extends: [
      js.configs.recommended,
      ...tseslint.configs.strictTypeChecked,
      ...tseslint.configs.stylisticTypeChecked,
    ],
    
    // 플러그인
    plugins: {
      "simple-import-sort": simpleImportSort,
    },
  }
]
</code></pre>
<h3><strong>왜 바뀌었을까?</strong></h3>
<p>공식 문서를 읽어본 것은 아니고, 직접 사용해보면서 든 생각이다. 나중에 <a href="https://eslint.org/blog/2022/08/new-config-system-part-2/" rel="noopener noreferrer" target="_blank">이런 문서</a>들을 읽으면서 생각을 구체화해볼 것.</p>
<h4>트리 구조는 참 직관적이라서 복잡하다</h4>
<p>두 가지 이유로 eslint는 단순해졌다. 하나는 여러 디렉토리를 돌아다니며 설정 파일을 찾지 않아도 된다는 점에서고, 다른 하나는 설정 객체의 의미와 동작 방식이 명확해졌다는 점에서다.</p>
<p>기존에는 파일 디렉토리에 의존한 트리 구조로 설정들이 관계 맺고 있었다. 반대로 flat config는 하나의 위계만을 갖고 있다. flat config에 의미를 부여하는 것은 트리의 부모-자식 관계가 아니라 "위에서 아래"라는 하나의 흐름이다. 위에서 아래로 규칙들을 순차적으로 적용하는 흐름. 모든 규칙이 적용되고 나면(마치 이벤트 소싱처럼) 결과물은 반드시 하나의 결정론적인 트리가 될 텐데, 이를 1차원 배열로 서술하는 것은 결과물의 복잡도를 많은 경우에 해소해준다.</p>
<p><strong>트리 구조는 참 직관적이라서 복잡하다.</strong> 여기에 대해서는 새로운 글을 쓸 것.</p>
<h4>glob 매칭의 자유로움</h4>
<p>개발자들은 참 창의적인 방식으로 본인의 리포지토리를 관리하기 때문에, 디렉토리 구조에 따라 린트 규칙을 세분화하는 방식은 큰 제약으로 다가온다. 때로는 특정 확장자나 파일명, 또는 디렉토리와 파일명의 복잡한 조합으로 코드 스타일 정책이 명시될 수도 있다. 이제는 설정 파일이 디렉토리에 구애받지 않기 때문에, 오직 glob 매칭에만 의존하여 마음 편히 적용 범위를 커스터마이징할 수 있다.</p>
<p>참고로 glob 매칭에는 <a href="https://www.npmjs.com/package/minimatch" rel="noopener noreferrer" target="_blank">minimatch</a> 라이브러리를 사용한다고 한다. 반드시 공부할 것.</p>
<h4>정책의 추가 / 삭제가 쉽다</h4>
<p>린트 정책이 추가 / 삭제될 일은 많지 않지만, 분명 존재한다. 특히 모노리포와 같은 환경에서는 더 그렇다. 이럴 때 flat config는 기존 규칙을 크게 건드리지 않고, 단순히 객체를 추가로 작성하는 것으로 정책의 변경을 가능하게 한다.</p>
<p>그리고 린트를 쉽게 부분 도입할 수 있는 것도 매력적이다. 이번 기회에 import-sort 플러그인을 회사의 프론트엔드 모노리포에 추가해보았는데, 효용이 입증되지도 않은 상황에서 전체 코드에 거대한 diff를 남기는 리팩토링을 진행할 수는 없었다. 그래서 비교적 규모가 작으면서 활발히 개발되고 있는 웹뷰 프로젝트에 먼저 플러그인을 도입해보았다. 아래와 같은 객체 하나를 배열의 끝에 추가하는 것으로 말이다.</p>
<pre><code>  // 더도 말고 덜도 말고 딱 import-sort만 
  {
    files: ["mobile/**/*.{ts,tsx}"],
    plugins: {
      "simple-import-sort": simpleImportSort,
    },
    rules: {
      "simple-import-sort/imports": "error",
      "simple-import-sort/exports": "error",
    },
  },
</code></pre>
<h3><strong>아쉬운 점</strong></h3>
<p>기존의 디렉토리 별 매칭이 가진 이점도 있었다. 바로 패키지 의존성 분리이다.</p>
<p>예컨데 NextJS 프로젝트를 위한 eslint-config-next는 next에 의존하는데, 다양한 프로젝트를 관리하는 환경에서 린팅을 위해 특정 패키지를 루트에 설치해야만 하는 것은 아쉽다. 물론 flat config에서도 파일 간 상속을 구현하는 방법이 있을 것 같지만 flat config의 디자인 철학과 맞지는 않다. 사실 eslint-config-next가 next에 의존하는 것 자체가 문제인 것 같기도.</p>
<p>또한 tsconfig 파일이 여전히 extend 기반의 트리 구조로 동작하는 한, tsconfig 파일에 기반한 린팅 방식(typescript-eslint 등이 사용하는)이 무엇인가 문제를 일으킬 것 같은 강한 예감이 든다.</p>
<h3><strong>여전히 고민은 남는다</strong></h3>
<p>트리와 1차원 배열 간의 경쟁은 참 흥미로운 고민거리이다.</p>
<p>1차원 배열의 가장 큰 이점은 구조에 큰 변경 없이도 내용을 변경하기가 좋다는 것이다. 그렇다보니 큰 변경도 아주 간단하게 처리할 수 있는데, 그러다보면 배열이 지저분해지기 쉽상이다. 배열만을 보았을 때, 이로써 결정되는 트리를 상상하기가 어려워지는 것이다.</p>
<p>보통 사용자에게 더 많은 자유도와 권한을 주는 기술은 쓰기 어렵기 마련이다. 린트 규칙을 명확히 서술할 노하우와 정책이 뒷받침되어야 flat config의 유용함이 비로소 느껴지지 싶다.</p>
<hr>
<ul>
<li>글을 쓰는 데 한시간 반 걸림. 힘이 너무 들어갔다.</li>
<li>strapi 에디터
<ul>
<li>볼드 단축키 버그가 있다. cmd+b 해도 볼드 적용되지 않음.</li>
<li>사용성은 그냥저냥. 헤더에 기본 볼드 처리가 되어 있지 않은 부분이 매력적이다.</li>
</ul>
</li>
</ul></div></div></div></article><!--$--><!--/$--><script src="/_next/static/chunks/webpack-5f38457b2eb92403.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[7555,[],\"\"]\n3:I[1295,[],\"\"]\n5:I[9665,[],\"OutletBoundary\"]\n8:I[4911,[],\"AsyncMetadataOutlet\"]\na:I[9665,[],\"ViewportBoundary\"]\nc:I[9665,[],\"MetadataBoundary\"]\ne:I[6614,[],\"\"]\n:HL[\"/_next/static/media/b471035bc347e80a-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/d146d21450fe224a.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"7YXAW4C4vXZT0CF0v4cMI\",\"p\":\"\",\"c\":[\"\",\"articles\",\"eslint-flat-config\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"articles\",{\"children\":[[\"slug\",\"eslint-flat-config\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d146d21450fe224a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_23d20e font-sans antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[\"articles\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"eslint-flat-config\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L4\",null,[\"$\",\"$L5\",null,{\"children\":[\"$L6\",\"$L7\",[\"$\",\"$L8\",null,{\"promise\":\"$@9\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"1MCPonH5olw2kX7vzIZv2v\",{\"children\":[[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$e\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"f:\"$Sreact.suspense\"\n10:I[4911,[],\"AsyncMetadata\"]\nd:[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$f\",null,{\"fallback\":null,\"children\":[\"$\",\"$L10\",null,{\"promise\":\"$@11\"}]}]}]\n7:null\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n6:null\n"])</script><script>self.__next_f.push([1,"9:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]],\"error\":null,\"digest\":\"$undefined\"}\n11:{\"metadata\":\"$9:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"12:I[6102,[\"37\",\"static/chunks/37-7ce4eea4950882d9.js\",\"904\",\"static/chunks/app/articles/%5Bslug%5D/page-b718477628d18af2.js\"],\"Header\"]\n13:I[6874,[\"37\",\"static/chunks/37-7ce4eea4950882d9.js\",\"904\",\"static/chunks/app/articles/%5Bslug%5D/page-b718477628d18af2.js\"],\"\"]\n4:[\"$\",\"article\",null,{\"children\":[[\"$\",\"$L12\",null,{\"pathname\":\"/articles\"}],[\"$\",\"div\",null,{\"className\":\"animate-reveal container mx-auto px-4 py-12 sm:py-24\",\"children\":[[\"$\",\"nav\",null,{\"aria-label\":\"breadcrumb\",\"data-slot\":\"breadcrumb\",\"className\":\"mb-6\",\"children\":[\"$\",\"ol\",null,{\"data-slot\":\"breadcrumb-list\",\"className\":\"text-muted-foreground flex flex-wrap items-center gap-1.5 break-words text-sm sm:gap-2.5\",\"children\":[[[\"$\",\"li\",null,{\"data-slot\":\"breadcrumb-item\",\"className\":\"inline-flex items-center gap-1.5\",\"children\":[\"$\",\"$L13\",null,{\"href\":\"/categories/environment\",\"className\":\"hover:text-foreground transition-colors text-gray-600 hover:text-gray-900\",\"children\":\"개발 환경\",\"data-slot\":\"breadcrumb-link\",\"ref\":null}]}],[\"$\",\"li\",null,{\"data-slot\":\"breadcrumb-separator\",\"role\":\"presentation\",\"aria-hidden\":\"true\",\"className\":\"[\u0026\u003esvg]:size-3.5\",\"children\":[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-chevron-right\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"mthhwq\",{\"d\":\"m9 18 6-6-6-6\"}],\"$undefined\"]}]}]],[\"$\",\"li\",null,{\"data-slot\":\"breadcrumb-item\",\"className\":\"inline-flex items-center gap-1.5\",\"children\":[\"$\",\"span\",null,{\"className\":\"font-medium text-gray-900\",\"children\":\"eslint의 flat config가 추구하는 단순함\"}]}]]}]}],[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-6 break-words break-keep text-3xl font-bold\",\"children\":\"eslint의 flat config가 추구하는 단순함\"}],[\"$\",\"div\",null,{\"className\":\"mb-8 text-right text-sm text-gray-500\",\"children\":\"2025년 6월 21일\"}]]}],[\"$\",\"div\""])</script><script>self.__next_f.push([1,",null,{\"className\":\"mt-8\",\"children\":[\"$L14\"]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"15:T1cf6,"])</script><script>self.__next_f.push([1,"\u003cp\u003e얼마 전에 회사 리포지토리의 eslint의 버전을 업그레이드하면서 flat config를 도입했다. eslint v9부터는 이제 flat config가 기본값이 되었다고 하는데, 왜일까?\u003c/p\u003e\n\u003ch3\u003e\u003cstrong\u003e무엇이 달라졌을까?\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003eflat config의 요점은 하나의 파일에 모든 규칙을 적는 것이다. 크고 복잡한 코드베이스를 운영하다보면 각각의 코드 파일들에 다른 lint 규칙을 적용하고 싶을 때가 많다. 이 요구에 부응하기 위해, 기존의 eslint는 대상 파일의 상위 디렉토리로 거슬러 올라가며 모든(root 설정을 만날 때 까지) 설정 파일을 탐색하고 규칙을 적용한다. 따라서 개발자는 프로젝트 최상단에 기본 규칙을 명시한 후, 각 디렉토리 별로 세분화된 설정을 추가하는 것으로 규칙을 커스터마이징할 수 있다.마치 객체 상속 같다.\u003c/p\u003e\n\u003cp\u003eflat config는 대신 하나의 파일에서, 규칙 객체의 배열을 선언하는 것으로 문제를 해결한다. 각각의 객체는 적용/무시 규칙, lint 규칙, 파싱 옵션, 사용할 플러그인들을 독립적으로 지니고 있으며, 위에서부터 순차적으로 대상 파일들에 적용된다. 서로 다른 규칙들은 모두 적용되고, 겹치는 부분은 \u003cstrong\u003e덮어쓰기\u003c/strong\u003e된다. flat cascade라는 방식이라고 한다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eGoodbye extends, hello flat cascade\u003c/strong\u003e\n-- \u003ca href=\"https://eslint.org/blog/2022/08/new-config-system-part-2/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eESLint 공식 블로그 포스팅\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e// 어머 깔끔해\nexport default [\n  {\n    // 적용 범위\n    files: [\"**/*.{ts,tsx}\"], \n    \n    // 규칙들\n    extends: [\n      js.configs.recommended,\n      ...tseslint.configs.strictTypeChecked,\n      ...tseslint.configs.stylisticTypeChecked,\n    ],\n    \n    // 플러그인\n    plugins: {\n      \"simple-import-sort\": simpleImportSort,\n    },\n  }\n]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e\u003cstrong\u003e왜 바뀌었을까?\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003e공식 문서를 읽어본 것은 아니고, 직접 사용해보면서 든 생각이다. 나중에 \u003ca href=\"https://eslint.org/blog/2022/08/new-config-system-part-2/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003e이런 문서\u003c/a\u003e들을 읽으면서 생각을 구체화해볼 것.\u003c/p\u003e\n\u003ch4\u003e트리 구조는 참 직관적이라서 복잡하다\u003c/h4\u003e\n\u003cp\u003e두 가지 이유로 eslint는 단순해졌다. 하나는 여러 디렉토리를 돌아다니며 설정 파일을 찾지 않아도 된다는 점에서고, 다른 하나는 설정 객체의 의미와 동작 방식이 명확해졌다는 점에서다.\u003c/p\u003e\n\u003cp\u003e기존에는 파일 디렉토리에 의존한 트리 구조로 설정들이 관계 맺고 있었다. 반대로 flat config는 하나의 위계만을 갖고 있다. flat config에 의미를 부여하는 것은 트리의 부모-자식 관계가 아니라 \"위에서 아래\"라는 하나의 흐름이다. 위에서 아래로 규칙들을 순차적으로 적용하는 흐름. 모든 규칙이 적용되고 나면(마치 이벤트 소싱처럼) 결과물은 반드시 하나의 결정론적인 트리가 될 텐데, 이를 1차원 배열로 서술하는 것은 결과물의 복잡도를 많은 경우에 해소해준다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e트리 구조는 참 직관적이라서 복잡하다.\u003c/strong\u003e 여기에 대해서는 새로운 글을 쓸 것.\u003c/p\u003e\n\u003ch4\u003eglob 매칭의 자유로움\u003c/h4\u003e\n\u003cp\u003e개발자들은 참 창의적인 방식으로 본인의 리포지토리를 관리하기 때문에, 디렉토리 구조에 따라 린트 규칙을 세분화하는 방식은 큰 제약으로 다가온다. 때로는 특정 확장자나 파일명, 또는 디렉토리와 파일명의 복잡한 조합으로 코드 스타일 정책이 명시될 수도 있다. 이제는 설정 파일이 디렉토리에 구애받지 않기 때문에, 오직 glob 매칭에만 의존하여 마음 편히 적용 범위를 커스터마이징할 수 있다.\u003c/p\u003e\n\u003cp\u003e참고로 glob 매칭에는 \u003ca href=\"https://www.npmjs.com/package/minimatch\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eminimatch\u003c/a\u003e 라이브러리를 사용한다고 한다. 반드시 공부할 것.\u003c/p\u003e\n\u003ch4\u003e정책의 추가 / 삭제가 쉽다\u003c/h4\u003e\n\u003cp\u003e린트 정책이 추가 / 삭제될 일은 많지 않지만, 분명 존재한다. 특히 모노리포와 같은 환경에서는 더 그렇다. 이럴 때 flat config는 기존 규칙을 크게 건드리지 않고, 단순히 객체를 추가로 작성하는 것으로 정책의 변경을 가능하게 한다.\u003c/p\u003e\n\u003cp\u003e그리고 린트를 쉽게 부분 도입할 수 있는 것도 매력적이다. 이번 기회에 import-sort 플러그인을 회사의 프론트엔드 모노리포에 추가해보았는데, 효용이 입증되지도 않은 상황에서 전체 코드에 거대한 diff를 남기는 리팩토링을 진행할 수는 없었다. 그래서 비교적 규모가 작으면서 활발히 개발되고 있는 웹뷰 프로젝트에 먼저 플러그인을 도입해보았다. 아래와 같은 객체 하나를 배열의 끝에 추가하는 것으로 말이다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e  // 더도 말고 덜도 말고 딱 import-sort만 \n  {\n    files: [\"mobile/**/*.{ts,tsx}\"],\n    plugins: {\n      \"simple-import-sort\": simpleImportSort,\n    },\n    rules: {\n      \"simple-import-sort/imports\": \"error\",\n      \"simple-import-sort/exports\": \"error\",\n    },\n  },\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e\u003cstrong\u003e아쉬운 점\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003e기존의 디렉토리 별 매칭이 가진 이점도 있었다. 바로 패키지 의존성 분리이다.\u003c/p\u003e\n\u003cp\u003e예컨데 NextJS 프로젝트를 위한 eslint-config-next는 next에 의존하는데, 다양한 프로젝트를 관리하는 환경에서 린팅을 위해 특정 패키지를 루트에 설치해야만 하는 것은 아쉽다. 물론 flat config에서도 파일 간 상속을 구현하는 방법이 있을 것 같지만 flat config의 디자인 철학과 맞지는 않다. 사실 eslint-config-next가 next에 의존하는 것 자체가 문제인 것 같기도.\u003c/p\u003e\n\u003cp\u003e또한 tsconfig 파일이 여전히 extend 기반의 트리 구조로 동작하는 한, tsconfig 파일에 기반한 린팅 방식(typescript-eslint 등이 사용하는)이 무엇인가 문제를 일으킬 것 같은 강한 예감이 든다.\u003c/p\u003e\n\u003ch3\u003e\u003cstrong\u003e여전히 고민은 남는다\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003e트리와 1차원 배열 간의 경쟁은 참 흥미로운 고민거리이다.\u003c/p\u003e\n\u003cp\u003e1차원 배열의 가장 큰 이점은 구조에 큰 변경 없이도 내용을 변경하기가 좋다는 것이다. 그렇다보니 큰 변경도 아주 간단하게 처리할 수 있는데, 그러다보면 배열이 지저분해지기 쉽상이다. 배열만을 보았을 때, 이로써 결정되는 트리를 상상하기가 어려워지는 것이다.\u003c/p\u003e\n\u003cp\u003e보통 사용자에게 더 많은 자유도와 권한을 주는 기술은 쓰기 어렵기 마련이다. 린트 규칙을 명확히 서술할 노하우와 정책이 뒷받침되어야 flat config의 유용함이 비로소 느껴지지 싶다.\u003c/p\u003e\n\u003chr\u003e\n\u003cul\u003e\n\u003cli\u003e글을 쓰는 데 한시간 반 걸림. 힘이 너무 들어갔다.\u003c/li\u003e\n\u003cli\u003estrapi 에디터\n\u003cul\u003e\n\u003cli\u003e볼드 단축키 버그가 있다. cmd+b 해도 볼드 적용되지 않음.\u003c/li\u003e\n\u003cli\u003e사용성은 그냥저냥. 헤더에 기본 볼드 처리가 되어 있지 않은 부분이 매력적이다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e"])</script><script>self.__next_f.push([1,"14:[\"$\",\"div\",\"2\",{\"className\":\"markdown\",\"dangerouslySetInnerHTML\":{\"__html\":\"$15\"}}]\n"])</script></body></html>